"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[523],{8523:(H,_,a)=>{a.r(_),a.d(_,{AuthModule:()=>Y});var f=a(89),m=a(4162),l=a(1300),i=a(6652),s=a(2369),c=a(2074),g=a(2151),C=a(8569),t=a(4355),y=a(7969),d=a(5181);let h=(()=>{class r{constructor(){this.router=(0,t.f3M)(m.F0),this.authService=(0,t.f3M)(d.e)}canActivate(){return this.authService.isLoggedIn$.pipe((0,y.U)(o=>!o||this.router.createUrlTree(["/home/profile"])))}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var T=a(9676),p=a(4202);function F(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Password is required "),t.qZA())}function w(r,e){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.xp6(1),t.hij(" ",o," ")}}function x(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"mat-form-field",1)(1,"mat-label"),t._uU(2,"Password"),t.qZA(),t._UZ(3,"input",2),t.YNc(4,F,2,0,"mat-error",3),t.YNc(5,w,2,1,"mat-error",4),t.TgZ(6,"button",5),t.NdJ("click",function(){t.CHM(o);const u=t.oxw();return t.KtG(u.hidePassword=!u.hidePassword)}),t.TgZ(7,"mat-icon"),t._uU(8),t.qZA()()()}if(2&r){const o=e.ngIf,n=t.oxw();t.xp6(3),t.Q6J("formControl",o)("type",n.hidePassword?"password":"text"),t.xp6(1),t.Q6J("ngIf",o.hasError("required")),t.xp6(1),t.Q6J("ngForOf",n.getFieldErrors(o))("ngForTrackBy",n.trackByErrorType),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",n.hidePassword),t.xp6(2),t.Oqu(n.hidePassword?"visibility_off":"visibility")}}let Z=(()=>{class r{constructor(){this.hidePassword=!0,this.getFieldErrors=p.b_,this.passwordControl=new i.NI}trackByErrorType(o,n){return n}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["camp-password-field"]],inputs:{passwordControl:"passwordControl"},decls:1,vars:1,consts:[["class","form__field",4,"ngIf"],[1,"form__field"],["matInput","",3,"formControl","type"],[4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["tabindex","-1","type","button","mat-icon-button","","matSuffix","",3,"click"]],template:function(o,n){1&o&&t.YNc(0,x,9,8,"mat-form-field",0),2&o&&t.Q6J("ngIf",n.passwordControl)},dependencies:[f.sg,f.O5,l.RK,i.Fj,i.JJ,i.oH,c.Nt,s.KE,s.hX,s.TO,s.R9,g.Hw],styles:[".form__field[_ngcontent-%COMP%]{display:grid}"]}),r})();function b(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Email is required "),t.qZA())}function v(r,e){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.xp6(1),t.hij(" ",o," ")}}function A(r,e){if(1&r&&(t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2,"Email:"),t.qZA(),t._UZ(3,"input",7),t.YNc(4,b,2,0,"mat-error",1),t.YNc(5,v,2,1,"mat-error",8),t.qZA()),2&r){const o=e.ngIf,n=t.oxw();t.xp6(3),t.Q6J("formControl",o),t.xp6(1),t.Q6J("ngIf",o.hasError("required")),t.xp6(1),t.Q6J("ngForOf",n.getFieldErrors(o))("ngForTrackBy",n.trackByErrorType)}}let P=(()=>{class r{constructor(){this.hidePasswordRetype=!0,this.authService=(0,t.f3M)(d.e),this.router=(0,t.f3M)(m.F0),this.formBuilder=(0,t.f3M)(i.j3),this.cdr=(0,t.f3M)(t.sBO),this.loginForm=this.formBuilder.group({email:["",i.kI.required],password:["",i.kI.required]},{updateOn:"submit"}),this.getFieldErrors=p.b_}onSubmit(){if(this.loginForm.invalid)return;const o=this.loginForm.getRawValue();this.authService.login(o).pipe((0,T.P)(),(0,p.Yc)(this.loginForm,this.cdr)).subscribe(()=>{this.router.navigate(["/home/profile"])})}trackByErrorType(o,n){return n}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["camp-login"]],decls:10,vars:3,consts:[[1,"form",3,"formGroup","ngSubmit"],[4,"ngIf"],[3,"passwordControl"],["mat-flat-button","","color","primary","type","submit"],[1,"navigation"],["routerLink","/home/registration","mat-raised-button",""],["routerLink","/anime","mat-raised-button",""],["matInput","",3,"formControl"],[4,"ngFor","ngForOf","ngForTrackBy"]],template:function(o,n){1&o&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.YNc(1,A,6,4,"mat-form-field",1),t._UZ(2,"camp-password-field",2),t.TgZ(3,"button",3),t._uU(4,"Sign in"),t.qZA()(),t.TgZ(5,"nav",4)(6,"a",5),t._uU(7,"Sign up"),t.qZA(),t.TgZ(8,"a",6),t._uU(9,"Anime Table"),t.qZA()()),2&o&&(t.Q6J("formGroup",n.loginForm),t.xp6(1),t.Q6J("ngIf",n.loginForm.controls.email),t.xp6(1),t.Q6J("passwordControl",n.loginForm.controls.password))},dependencies:[f.sg,f.O5,m.rH,l.zs,l.lW,i._Y,i.Fj,i.JJ,i.JL,i.oH,i.sg,c.Nt,s.KE,s.hX,s.TO,Z],styles:[".form[_ngcontent-%COMP%]{display:grid;padding:30px}.navigation[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-column-gap:30px;padding:0 30px}"],changeDetection:0}),r})();function I(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Email is required "),t.qZA())}function U(r,e){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.xp6(1),t.hij(" ",o," ")}}function q(r,e){if(1&r&&(t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2,"Email:"),t.qZA(),t._UZ(3,"input",7),t.YNc(4,I,2,0,"mat-error",1),t.YNc(5,U,2,1,"mat-error",8),t.qZA()),2&r){const o=e.ngIf,n=t.oxw();t.xp6(3),t.Q6J("formControl",o),t.xp6(1),t.Q6J("ngIf",o.hasError("required")),t.xp6(1),t.Q6J("ngForOf",n.getFieldErrors(o))("ngForTrackBy",n.trackByErrorType)}}function R(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," First name is required "),t.qZA())}function N(r,e){if(1&r&&(t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2,"First name:"),t.qZA(),t._UZ(3,"input",9),t.YNc(4,R,2,0,"mat-error",1),t.qZA()),2&r){const o=e.ngIf;t.xp6(3),t.Q6J("formControl",o),t.xp6(1),t.Q6J("ngIf",o.hasError("required"))}}function E(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Last name is required "),t.qZA())}function M(r,e){if(1&r&&(t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2,"Last name:"),t.qZA(),t._UZ(3,"input",9),t.YNc(4,E,2,0,"mat-error",1),t.qZA()),2&r){const o=e.ngIf;t.xp6(3),t.Q6J("formControl",o),t.xp6(1),t.Q6J("ngIf",o.hasError("required"))}}function k(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Repeat password "),t.qZA())}function Q(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Passwords do not match "),t.qZA())}function S(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2,"Repeat Password"),t.qZA(),t._UZ(3,"input",10),t.YNc(4,k,2,0,"mat-error",1),t.YNc(5,Q,2,0,"mat-error",1),t.TgZ(6,"button",11),t.NdJ("click",function(){t.CHM(o);const u=t.oxw();return t.KtG(u.hidePasswordRetype=!u.hidePasswordRetype)}),t.TgZ(7,"mat-icon"),t._uU(8),t.qZA()()()}if(2&r){const o=e.ngIf,n=t.oxw();t.xp6(3),t.Q6J("formControl",o)("type",n.hidePasswordRetype?"password":"text"),t.xp6(1),t.Q6J("ngIf",o.hasError("required")),t.xp6(1),t.Q6J("ngIf",o.hasError("matching")),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",n.hidePasswordRetype),t.xp6(2),t.Oqu(n.hidePasswordRetype?"visibility_off":"visibility")}}let O=(()=>{class r{constructor(){this.hidePasswordRetype=!0,this.authService=(0,t.f3M)(d.e),this.router=(0,t.f3M)(m.F0),this.formBuilder=(0,t.f3M)(i.j3),this.cdr=(0,t.f3M)(t.sBO),this.registrationForm=this.formBuilder.group({email:["",i.kI.required],firstName:["",i.kI.required],lastName:["",i.kI.required],password:["",i.kI.required],confirmPassword:["",[i.kI.required,r=>r.value===r.parent?.get("password")?.value?null:{matching:!0}]]},{updateOn:"submit"}),this.getFieldErrors=p.b_}onSubmit(){if(this.registrationForm.invalid)return;const o=this.registrationForm.getRawValue();this.authService.register(o).pipe((0,T.P)(),(0,p.Yc)(this.registrationForm,this.cdr)).subscribe(()=>{this.router.navigate(["/home/profile"])})}trackByErrorType(o,n){return n}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["camp-registration"]],decls:13,vars:6,consts:[[1,"form",3,"formGroup","ngSubmit"],[4,"ngIf"],[3,"passwordControl"],["mat-flat-button","","color","primary","type","submit"],[1,"navigation"],["routerLink","/home/login","mat-raised-button",""],["routerLink","/anime","mat-raised-button",""],["matInput","","formControlName","email",3,"formControl"],[4,"ngFor","ngForOf","ngForTrackBy"],["matInput","",3,"formControl"],["matInput","",3,"formControl","type"],["tabindex","-1","type","button","mat-icon-button","","matSuffix","",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.YNc(1,q,6,4,"mat-form-field",1),t.YNc(2,N,5,2,"mat-form-field",1),t.YNc(3,M,5,2,"mat-form-field",1),t._UZ(4,"camp-password-field",2),t.YNc(5,S,9,7,"mat-form-field",1),t.TgZ(6,"button",3),t._uU(7,"Sign up"),t.qZA()(),t.TgZ(8,"nav",4)(9,"a",5),t._uU(10,"Sign in"),t.qZA(),t.TgZ(11,"a",6),t._uU(12,"Anime Table"),t.qZA()()),2&o&&(t.Q6J("formGroup",n.registrationForm),t.xp6(1),t.Q6J("ngIf",n.registrationForm.controls.email),t.xp6(1),t.Q6J("ngIf",n.registrationForm.controls.firstName),t.xp6(1),t.Q6J("ngIf",n.registrationForm.controls.lastName),t.xp6(1),t.Q6J("passwordControl",n.registrationForm.controls.password),t.xp6(1),t.Q6J("ngIf",n.registrationForm.controls.confirmPassword))},dependencies:[f.sg,f.O5,m.rH,l.zs,l.lW,l.RK,i._Y,i.Fj,i.JJ,i.JL,i.oH,i.sg,i.u,c.Nt,s.KE,s.hX,s.TO,s.R9,g.Hw,Z],styles:[".form[_ngcontent-%COMP%]{display:grid;padding:30px}.navigation[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-column-gap:30px;padding:0 30px}"],changeDetection:0}),r})();const B=[{path:"profile",component:(()=>{class r{constructor(){this.authService=(0,t.f3M)(d.e)}logout(){this.authService.logout()}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["camp-profile"]],decls:7,vars:0,consts:[[1,"profile"],["type","button","mat-raised-button","","color","primary",3,"click"],["routerLink","/anime","mat-raised-button",""]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Welcome to your profile!"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return n.logout()}),t._uU(4,"Log out"),t.qZA(),t.TgZ(5,"a",2),t._uU(6,"Anime table"),t.qZA()())},dependencies:[m.rH,l.zs,l.lW],styles:[".profile[_ngcontent-%COMP%]{display:grid;grid-row-gap:30px;text-align:center}"],changeDetection:0}),r})(),canActivate:[C.a]},{path:"login",component:P,canActivate:[h]},{path:"registration",component:O,canActivate:[h]},{path:"",redirectTo:"profile",pathMatch:"full"}];let L=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[m.Bz.forChild(B),m.Bz]}),r})(),Y=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[f.ez,L,m.Bz,l.ot,i.u5,i.UX,c.c,s.lN,g.Ps]}),r})()}}]);