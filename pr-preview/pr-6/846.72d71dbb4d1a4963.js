"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[846],{7846:(K,_,s)=>{s.r(_),s.d(_,{AuthModule:()=>H});var f=s(89),l=s(6789),u=s(1300),i=s(6652),m=s(2369),d=s(2074),c=s(2151),p=s(9628),t=s(4355);let h=(()=>{class r{constructor(){this.auth=(0,t.f3M)(p.e),this.router=(0,t.f3M)(l.F0)}canActivate(){return!!this.auth.isLoggedIn()||(this.router.navigate(["/home/login"]),!1)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),C=(()=>{class r{constructor(){this.auth=(0,t.f3M)(p.e),this.router=(0,t.f3M)(l.F0)}canActivate(){return!this.auth.isLoggedIn()||(this.router.navigate(["/home/profile"]),!1)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var Z=s(9676),T=s(3568),w=s(3787);function g(r){const e=[];return r.errors&&e.push(...Object.keys(r.errors).map(o=>r.getError(o))),e}var F=s(9499);function A(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Password is required "),t.qZA())}function v(r,e){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.xp6(1),t.hij(" ",o," ")}}function x(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"mat-form-field",1)(1,"mat-label"),t._uU(2,"Password"),t.qZA(),t._UZ(3,"input",2),t.YNc(4,A,2,0,"mat-error",3),t.YNc(5,v,2,1,"mat-error",4),t.TgZ(6,"button",5),t.NdJ("click",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.hidePassword=!a.hidePassword)}),t.TgZ(7,"mat-icon"),t._uU(8),t.qZA()()()}if(2&r){const o=e.ngIf,n=t.oxw();t.xp6(3),t.Q6J("formControl",o)("type",n.hidePassword?"password":"text"),t.xp6(1),t.Q6J("ngIf",o.hasError("required")),t.xp6(1),t.Q6J("ngForOf",n.getFieldErrors(o)),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",n.hidePassword),t.xp6(2),t.Oqu(n.hidePassword?"visibility_off":"visibility")}}let y=(()=>{class r{constructor(){this.hidePassword=!0,this.getFieldErrors=g,this.passwordControl=new i.NI}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["camp-password-field"]],inputs:{passwordControl:"passwordControl"},decls:1,vars:1,consts:[["class","form__field",4,"ngIf"],[1,"form__field"],["matInput","",3,"formControl","type"],[4,"ngIf"],[4,"ngFor","ngForOf"],["type","button","mat-icon-button","","matSuffix","",3,"click"]],template:function(o,n){1&o&&t.YNc(0,x,9,7,"mat-form-field",0),2&o&&t.Q6J("ngIf",n.passwordControl)},dependencies:[f.sg,f.O5,u.RK,i.Fj,i.JJ,i.oH,d.Nt,m.KE,m.hX,m.TO,m.R9,c.Hw],styles:[".form__field[_ngcontent-%COMP%]{display:grid}"]}),r})();function b(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Email is required "),t.qZA())}function P(r,e){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.xp6(1),t.hij(" ",o," ")}}function I(r,e){if(1&r&&(t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2,"Email:"),t.qZA(),t._UZ(3,"input",7),t.YNc(4,b,2,0,"mat-error",1),t.YNc(5,P,2,1,"mat-error",8),t.qZA()),2&r){const o=e.ngIf,n=t.oxw();t.xp6(3),t.Q6J("formControl",o),t.xp6(1),t.Q6J("ngIf",o.hasError("required")),t.xp6(1),t.Q6J("ngForOf",n.getFieldErrors(o))}}let J=(()=>{class r{constructor(){this.hidePasswordRetype=!0,this.authService=(0,t.f3M)(p.e),this.router=(0,t.f3M)(l.F0),this.formBuilder=(0,t.f3M)(i.j3),this.loginForm=this.formBuilder.group({email:["",i.kI.required],password:["",i.kI.required]},{updateOn:"submit"}),this.getFieldErrors=g}handleLoginError(o){o.forEach(n=>{const a=this.loginForm.get(n.attribute);a&&a.setErrors({...a.errors??{},[n.code]:n.detail})})}onSubmit(){if(!1===this.loginForm.invalid){const o=this.loginForm.getRawValue();this.authService.login(o).pipe((0,Z.P)(),(0,T.K)(n=>(n instanceof F.K&&this.handleLoginError(n.mappedErrorArray),(0,w._)(()=>n)))).subscribe(()=>{this.router.navigate(["/home/profile"])})}}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["camp-login"]],decls:10,vars:3,consts:[[1,"form",3,"formGroup","ngSubmit"],[4,"ngIf"],[3,"passwordControl"],["mat-flat-button","","color","primary","type","submit"],[1,"navigation"],["routerLink","/home/registration","mat-raised-button",""],["routerLink","/anime","mat-raised-button",""],["matInput","",3,"formControl"],[4,"ngFor","ngForOf"]],template:function(o,n){1&o&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.YNc(1,I,6,3,"mat-form-field",1),t._UZ(2,"camp-password-field",2),t.TgZ(3,"button",3),t._uU(4,"Sign in"),t.qZA()(),t.TgZ(5,"nav",4)(6,"a",5),t._uU(7,"Sign up"),t.qZA(),t.TgZ(8,"a",6),t._uU(9,"Anime"),t.qZA()()),2&o&&(t.Q6J("formGroup",n.loginForm),t.xp6(1),t.Q6J("ngIf",n.loginForm.controls.email),t.xp6(1),t.Q6J("passwordControl",n.loginForm.controls.password))},dependencies:[f.sg,f.O5,l.rH,u.zs,u.lW,i._Y,i.Fj,i.JJ,i.JL,i.oH,i.sg,d.Nt,m.KE,m.hX,m.TO,y],styles:[".form[_ngcontent-%COMP%]{display:grid;padding:30px}.navigation[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-column-gap:30px;padding:0 30px}"]}),r})();function R(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Email is required "),t.qZA())}function E(r,e){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.xp6(1),t.hij(" ",o," ")}}function U(r,e){if(1&r&&(t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2,"Email:"),t.qZA(),t._UZ(3,"input",7),t.YNc(4,R,2,0,"mat-error",1),t.YNc(5,E,2,1,"mat-error",8),t.qZA()),2&r){const o=e.ngIf,n=t.oxw();t.xp6(3),t.Q6J("formControl",o),t.xp6(1),t.Q6J("ngIf",o.hasError("required")),t.xp6(1),t.Q6J("ngForOf",n.getFieldErrors(o))}}function N(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," First name is required "),t.qZA())}function M(r,e){if(1&r&&(t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2,"First name:"),t.qZA(),t._UZ(3,"input",9),t.YNc(4,N,2,0,"mat-error",1),t.qZA()),2&r){const o=e.ngIf;t.xp6(3),t.Q6J("formControl",o),t.xp6(1),t.Q6J("ngIf",o.hasError("required"))}}function Q(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Last name is required "),t.qZA())}function L(r,e){if(1&r&&(t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2,"Last name:"),t.qZA(),t._UZ(3,"input",9),t.YNc(4,Q,2,0,"mat-error",1),t.qZA()),2&r){const o=e.ngIf;t.xp6(3),t.Q6J("formControl",o),t.xp6(1),t.Q6J("ngIf",o.hasError("required"))}}function S(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Repeat password "),t.qZA())}function Y(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1," Passwords do not match "),t.qZA())}function O(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"mat-form-field")(1,"mat-label"),t._uU(2,"Repeat Password"),t.qZA(),t._UZ(3,"input",10),t.YNc(4,S,2,0,"mat-error",1),t.YNc(5,Y,2,0,"mat-error",1),t.TgZ(6,"button",11),t.NdJ("click",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.hidePasswordRetype=!a.hidePasswordRetype)}),t.TgZ(7,"mat-icon"),t._uU(8),t.qZA()()()}if(2&r){const o=e.ngIf,n=t.oxw();t.xp6(3),t.Q6J("formControl",o)("type",n.hidePasswordRetype?"password":"text"),t.xp6(1),t.Q6J("ngIf",o.hasError("required")),t.xp6(1),t.Q6J("ngIf",o.hasError("matching")),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",n.hidePasswordRetype),t.xp6(2),t.Oqu(n.hidePasswordRetype?"visibility_off":"visibility")}}const k=[{path:"profile",component:(()=>{class r{constructor(){this.authService=(0,t.f3M)(p.e),this.router=(0,t.f3M)(l.F0)}logout(){this.authService.logout(),this.router.navigate(["/anime/table"])}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["camp-profile"]],decls:7,vars:0,consts:[[1,"profile"],["type","button","mat-raised-button","","color","primary",3,"click"],["routerLink","/anime","mat-raised-button",""]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Welcome to your profile!"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return n.logout()}),t._uU(4,"Log out"),t.qZA(),t.TgZ(5,"a",2),t._uU(6,"Table"),t.qZA()())},dependencies:[l.rH,u.zs,u.lW],styles:[".profile[_ngcontent-%COMP%]{display:grid;grid-row-gap:30px;text-align:center}"]}),r})(),canActivate:[h]},{path:"login",component:J,canActivate:[C]},{path:"registration",component:(()=>{class r{constructor(){this.hidePasswordRetype=!0,this.authService=(0,t.f3M)(p.e),this.router=(0,t.f3M)(l.F0),this.formBuilder=(0,t.f3M)(i.j3),this.registrationForm=this.formBuilder.group({email:["",i.kI.required],firstName:["",i.kI.required],lastName:["",i.kI.required],password:["",i.kI.required],confirmPassword:["",[i.kI.required,r=>r.value===r.parent?.get("password")?.value?null:{matching:!0}]]},{updateOn:"submit"}),this.getFieldErrors=g}handleRegistrationError(o){o.forEach(n=>{const a=this.registrationForm.get(n.attribute);a&&a.setErrors({...a.errors??{},[n.code]:n.detail})})}onSubmit(){if(!1===this.registrationForm.invalid){const o=this.registrationForm.getRawValue();this.authService.register(o).pipe((0,Z.P)(),(0,T.K)(n=>(n instanceof F.K&&this.handleRegistrationError(n.mappedErrorArray),(0,w._)(()=>n)))).subscribe(()=>{this.router.navigate(["/home/profile"])})}}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["camp-registration"]],decls:13,vars:6,consts:[[1,"form",3,"formGroup","ngSubmit"],[4,"ngIf"],[3,"passwordControl"],["mat-flat-button","","color","primary","type","submit"],[1,"navigation"],["routerLink","/home/login","mat-raised-button",""],["routerLink","/anime","mat-raised-button",""],["matInput","","formControlName","email",3,"formControl"],[4,"ngFor","ngForOf"],["matInput","",3,"formControl"],["matInput","",3,"formControl","type"],["type","button","mat-icon-button","","matSuffix","",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.YNc(1,U,6,3,"mat-form-field",1),t.YNc(2,M,5,2,"mat-form-field",1),t.YNc(3,L,5,2,"mat-form-field",1),t._UZ(4,"camp-password-field",2),t.YNc(5,O,9,7,"mat-form-field",1),t.TgZ(6,"button",3),t._uU(7,"Sign up"),t.qZA()(),t.TgZ(8,"nav",4)(9,"a",5),t._uU(10,"Sign in"),t.qZA(),t.TgZ(11,"a",6),t._uU(12,"Anime"),t.qZA()()),2&o&&(t.Q6J("formGroup",n.registrationForm),t.xp6(1),t.Q6J("ngIf",n.registrationForm.controls.email),t.xp6(1),t.Q6J("ngIf",n.registrationForm.controls.firstName),t.xp6(1),t.Q6J("ngIf",n.registrationForm.controls.lastName),t.xp6(1),t.Q6J("passwordControl",n.registrationForm.controls.password),t.xp6(1),t.Q6J("ngIf",n.registrationForm.controls.confirmPassword))},dependencies:[f.sg,f.O5,l.rH,u.zs,u.lW,u.RK,i._Y,i.Fj,i.JJ,i.JL,i.oH,i.sg,i.u,d.Nt,m.KE,m.hX,m.TO,m.R9,c.Hw,y],styles:[".form[_ngcontent-%COMP%]{display:grid;padding:30px}.navigation[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-column-gap:30px;padding:0 30px}"]}),r})(),canActivate:[C]},{path:"",redirectTo:"profile",pathMatch:"full"}];let G=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[l.Bz.forChild(k),l.Bz]}),r})(),H=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[p.e,h],imports:[f.ez,G,l.Bz,u.ot,i.u5,i.UX,d.c,m.lN,c.Ps]}),r})()}}]);